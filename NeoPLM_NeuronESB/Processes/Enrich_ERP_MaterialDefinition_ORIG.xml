<?xml version="1.0"?>
<ESBMessagePipelineStorage xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Id>4354ae70-0eb1-4f8d-95ea-e1668525e673</Id>
  <Version>ff83e040-09b3-498f-a33b-4a32cc563898</Version>
  <BusinessFlows />
  <Description />
  <Name>Enrich_ERP_MaterialDefinition_ORIG</Name>
  <IsSystemObject>false</IsSystemObject>
  <IsPrivate>false</IsPrivate>
  <Category>General</Category>
  <IsEncrypted>true</IsEncrypted>
  <Path>Main Processes</Path>
  <PipelineBlob>&lt;ESBMessagePipeline xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.neuronesb.com/pipelines/"&gt;&lt;Category&gt;General&lt;/Category&gt;&lt;Description /&gt;&lt;GlobalProperties xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Name&gt;Enrich_ERP_MaterialDefinition_ORIG&lt;/Name&gt;&lt;Properties xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;ReferencedAssemblies xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" i:nil="true" /&gt;&lt;Steps&gt;&lt;ESBMessagePipelineStep i:type="ExceptionPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d4p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;cbc346f5-af51-4398-acd7-73cbf2ed8ed8&lt;/Id&gt;&lt;Name&gt;Catch Exceptions&lt;/Name&gt;&lt;Uniquename&gt;6f47393a-cd9a-4dea-955b-5311e7ed8ba3&lt;/Uniquename&gt;&lt;Catch&gt;&lt;Bindings xmlns:d5p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;87716ace-9ff5-4a56-a9f0-b0213bfd859e&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep xmlns:d6p1="http://schemas.neuronesb.com/pipelines/esb/" i:type="d6p1:EsbMessagePipelineExecutionPipelineStep"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;01263186-a535-46ce-bbe5-6ac0c2c3c630&lt;/Id&gt;&lt;Name&gt;Exception Handler&lt;/Name&gt;&lt;Uniquename /&gt;&lt;d6p1:FileName i:nil="true" /&gt;&lt;d6p1:MaxInstances&gt;100&lt;/d6p1:MaxInstances&gt;&lt;d6p1:PipelineName&gt;Exception Handler&lt;/d6p1:PipelineName&gt;&lt;d6p1:PoolTimeout&gt;PT1M&lt;/d6p1:PoolTimeout&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Catch&gt;&lt;Finally&gt;&lt;Bindings xmlns:d5p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;d0613417-a23b-44c1-8a26-e04cdc2833b5&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Children /&gt;&lt;/Finally&gt;&lt;Try&gt;&lt;Bindings xmlns:d5p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;ab8f72aa-40ec-4777-aecc-b4ca6ce10a7e&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep xmlns:d6p1="http://schemas.neuronesb.com/pipelines/esb/" i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;49e926cd-64f0-4070-8058-d214923b6ac2&lt;/Id&gt;&lt;Name&gt;Check for retry&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d7p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;//Check for retry. If it is a retry, sleep for 30 seconds
if (context.State.ContainsKey("RetryMessageID"))
{
        if (context.Data.Header.MessageId == (string)context.State["RetryMessageID"])
        {
               System.Threading.Thread.Sleep(30000);
        }
        else
        {
               context.State["RetryMessageID"] = context.Data.Header.MessageId;
        }
}
else
{
        context.State.Add("RetryMessageID", context.Data.Header.MessageId);
}&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d7p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d7p1:string&gt;Neuron&lt;/d7p1:string&gt;&lt;d7p1:string&gt;Neuron.Pipelines&lt;/d7p1:string&gt;&lt;d7p1:string&gt;Neuron.Esb&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;d7p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d7p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Typebe23839b9f04ee69682174c3b9f72a&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep xmlns:d6p1="http://schemas.neuronesb.com/pipelines/esb/" i:type="d6p1:EsbMessageSchemaValidationPipelineStep"&gt;&lt;Bindings xmlns:d7p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;833db185-9941-4518-9328-cecb19123e5d&lt;/Id&gt;&lt;Name&gt;SchemaValidation&lt;/Name&gt;&lt;Uniquename /&gt;&lt;OnInvalid&gt;&lt;Bindings xmlns:d8p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;c8699b43-0cdf-4244-b0fd-70bbe7c4fe98&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d10p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;f1fcf763-47e5-44f2-87c5-46bebbb96767&lt;/Id&gt;&lt;Name&gt;Trace the Available Information on the Exception&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d10p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;//get the current exception
Exception ex = (Exception)context.Properties["CurrentException"];

string msg = "Validation Exception: ";
if(ex.InnerException != null)
{
	msg += ex.InnerException.Message;
}
else
{
	msg += ex.Message;
}

//trace to designer window
context.Instance.TraceError(msg);&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d10p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d10p1:string&gt;Neuron&lt;/d10p1:string&gt;&lt;d10p1:string&gt;Neuron.Pipelines&lt;/d10p1:string&gt;&lt;d10p1:string&gt;Neuron.Esb&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d10p1:string&gt;&lt;d10p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d10p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type704279b027f4124a01e147e3dd82da&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d10p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;690c6f35-28a5-45df-8533-0a4a9b2aa8fe&lt;/Id&gt;&lt;Name&gt;Create Invalid Schema Error&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d10p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;//get the current exception
Exception ex = (Exception)context.Properties["CurrentException"];

string msg = "Validation Exception: ";
if(ex.InnerException != null)
{
	msg += ex.InnerException.Message;
}
else
{
	msg += ex.Message;
}

//trace to designer window
context.Instance.TraceError(msg);

string errorMessage = System.Net.WebUtility.HtmlEncode (msg);

// Get the data together to send the Business Error Message
string endpointAddress = context.Data.Header.To;
string eSBAction = context.Data.Header.Action;
string eSBTopic = context.Data.Header.Topic;
string sourceSystemID = ""; 
string plantID = "";
string transactionID = context.Properties["OriginalMessageID"].ToString();
string messageDate = context.Data.Header.Created.ToString("yyyy-MM-ddTHH:mm:ssZ");
string errorCode = "1000";
string originalMessage = System.Net.WebUtility.HtmlEncode (context.Properties ["OrigMsg"].ToString());

// Get the business error template
string errorTemplate = context.Configuration.XmlDocs["ESB Invalid Schema Error Message"].Xml;

string eSBErrorMessage = string.Format(errorTemplate, endpointAddress, eSBAction, eSBTopic, sourceSystemID, plantID, transactionID, messageDate, errorCode, errorMessage, originalMessage);

context.Instance.TraceInformation ("System Error: " + eSBErrorMessage);

context.Data.Text = eSBErrorMessage;
&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d10p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d10p1:string&gt;Neuron&lt;/d10p1:string&gt;&lt;d10p1:string&gt;Neuron.Pipelines&lt;/d10p1:string&gt;&lt;d10p1:string&gt;Neuron.Esb&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d10p1:string&gt;&lt;d10p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d10p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type11624a5a2154ce58811e380fbf8048&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessagePublishPipelineStep"&gt;&lt;Bindings xmlns:d10p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;988e20fb-86fa-46c1-918e-5a48b0434e4a&lt;/Id&gt;&lt;Name&gt;Publish&lt;/Name&gt;&lt;Uniquename /&gt;&lt;d6p1:Semantic&gt;Multicast&lt;/d6p1:Semantic&gt;&lt;d6p1:Timeout&gt;0&lt;/d6p1:Timeout&gt;&lt;d6p1:TopicSelector i:type="d6p1:ESBMessageConstTopicSelector"&gt;&lt;d6p1:Topic&gt;ESBError&lt;/d6p1:Topic&gt;&lt;/d6p1:TopicSelector&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="CancelPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d10p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;19a35800-ca55-4e28-a50a-64e936d0dd65&lt;/Id&gt;&lt;Name&gt;Cancel&lt;/Name&gt;&lt;Uniquename /&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/OnInvalid&gt;&lt;OnValid&gt;&lt;Bindings xmlns:d8p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;a87d472d-ff3b-44fa-92aa-7c2157a79e17&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d10p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;95c8f416-0f8b-4d63-9e49-a52249d45bb2&lt;/Id&gt;&lt;Name&gt;Init Transaction&lt;/Name&gt;&lt;Uniquename&gt;9d010aaf-1bf0-462f-a7b8-a2aa132ce186&lt;/Uniquename&gt;&lt;BreakPointLines xmlns:d10p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;// Save original message in case we need it later
context.Properties.Add("OrigMsg", context.Data.Text);

// Create Process Title Property.  Used for logging.
context.Properties.Add ("OriginalMessageID", context.Data.Header.MessageId);

// Create Soap Action property and set it to the incoming message property.
context.Properties.Add("SoapAction", "");
if (context.Data.Header.Action.Length &amp;gt; 0) { context.Properties["SoapAction"] = context.Data.Header.Action; }
context.Instance.TraceInformation ("SOAP Action: " + context.Properties["SoapAction"]);

// Create the Source System ID property
string sourceSystemId = context.Data.ToXmlDocument().SelectSingleNode("/*[local-name()='NeoLocalMaterialSpecificationOrConsumableCollection' and namespace-uri()='http://NeoPLM.com/Integration/Materials']/*[local-name()='MessageHeader' and namespace-uri()='http://NeoPLM.com/Integration/Materials']/*[local-name()='SourceSystemID' and namespace-uri()='http://NeoPLM.com/Integration/Materials']").InnerText;
context.Properties.Add("SourceSystemID", sourceSystemId);
context.Instance.TraceInformation ("   Source System ID: " + context.Properties["SourceSystemID"].ToString());

// Create the Transaction ID property
string transactionID = context.Data.ToXmlDocument().SelectSingleNode("/*[local-name()='NeoLocalMaterialSpecificationOrConsumableCollection' and namespace-uri()='http://NeoPLM.com/Integration/Materials']/*[local-name()='MessageHeader' and namespace-uri()='http://NeoPLM.com/Integration/Materials']/*[local-name()='TransactionID' and namespace-uri()='http://NeoPLM.com/Integration/Materials']").InnerText;
context.Properties.Add("TransactionID", transactionID);
context.Instance.TraceInformation ("   Transaction ID: " + context.Properties["TransactionID"].ToString());

// Create the Transaction Date Property
context.Properties.Add("TransactionDateTime", "");
string transactionDate = context.Data.ToXmlDocument().SelectSingleNode("/*[local-name()='NeoLocalMaterialSpecificationOrConsumableCollection' and namespace-uri()='http://NeoPLM.com/Integration/Materials']/*[local-name()='MessageHeader' and namespace-uri()='http://NeoPLM.com/Integration/Materials'][1]/*[local-name()='TransactionDateTime' and namespace-uri()='http://NeoPLM.com/Integration/Materials']").InnerText;
context.Properties["TransactionDateTime"] = transactionDate;

context.Instance.TraceInformation ("   Transaction Date / Time: " + context.Properties["TransactionDateTime"].ToString());

// ************************************
// Material Definition Iteration Support
// ************************************

//Add Properties to support iteration over each Material Definition in the message.
context.Properties.Add ("PlantID", "");
context.Properties.Add ("MaterialID", "");
context.Properties.Add ("MaterialDescription", "");
context.Properties.Add ("InventoryUnitofMeasureID", "");
context.Properties.Add ("MaterialType", "");
context.Properties.Add ("EffectivityStartDate", "");
context.Properties.Add ("EffectivityEndDate", "");
context.Properties.Add ("NeoGlobalMaterialSpecificationID", "");
context.Properties.Add ("NeoGlobalMaterialSpecificationDescription", "");
context.Properties.Add ("MaterialParameters", "");

// Add Lookup Result Properties to support iteration over each Material Definition in the message.

context.Properties.Add ("NeoExternalSystemUIDUID", "");
context.Properties.Add ("NeoFacilityUID", "");
context.Properties.Add ("NeoERPPlantUID", "");
context.Properties.Add ("NeoLocalMaterialSpecificationUID", "");
context.Properties.Add ("NeoConsumableUID", "");
context.Properties.Add ("NeoMaterialType", "");
context.Properties.Add ("LocalServiceURI", "");
context.Properties.Add ("InventoryUnitofMeasureUID", "");
context.Properties.Add ("NeoMaterialMasterType", "");
context.Properties.Add ("LastUpdateDateTime", "");

// Create the material definition node list to support iteration
var materialDefinitions = context.Data.ToXmlDocument().SelectNodes("/*[local-name()='NeoLocalMaterialSpecificationOrConsumableCollection' and namespace-uri()='http://NeoPLM.com/Integration/Materials']/*[local-name()='NeoLocalMaterialSpecifications' and namespace-uri()='http://NeoPLM.com/Integration/Materials']/*[local-name()='NeoLocalMaterialSpecification' and namespace-uri()='http://NeoPLM.com/Integration/Materials']");
context.Properties.Add("MaterialDefinitions", materialDefinitions);

context.Instance.TraceInformation("Material Definitions Count: " + materialDefinitions.Count.ToString());
context.Instance.TraceInformation ("");&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d10p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d10p1:string&gt;Neuron&lt;/d10p1:string&gt;&lt;d10p1:string&gt;Neuron.Pipelines&lt;/d10p1:string&gt;&lt;d10p1:string&gt;Neuron.Esb&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type6f01709dad2402bb4b6571118ee560&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d10p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;d2daef06-f0bd-4b4b-8ff0-5e6d75831bbd&lt;/Id&gt;&lt;Name&gt;Map Transaction Date&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d10p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;// Retrieve the response template message
string dateTimeValidationRequestTemplate = context.Configuration.XmlDocs["DateTimeValidationRequest"].Xml;
	
string message = System.Net.WebUtility.HtmlEncode (context.Properties["OrigMsg"].ToString());

// Create the response message
string dateTimeValidationRequest = string.Format(dateTimeValidationRequestTemplate, context.Properties["TransactionID"], context.Properties["SourceSystemID"], context.Properties["PlantID"], "TransactionDateTime", context.Properties["TransactionDateTime"].ToString(), message);

//Send the trace message to document the response message.
context.Instance.TraceInformation ("Process Material Definition - Message ID: " + context.Data.Header.MessageId.ToString() + " Request Message: " + dateTimeValidationRequest);
	
// Set message context to the response message 	
context.Data.Text = dateTimeValidationRequest;&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d10p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d10p1:string&gt;Neuron&lt;/d10p1:string&gt;&lt;d10p1:string&gt;Neuron.Pipelines&lt;/d10p1:string&gt;&lt;d10p1:string&gt;Neuron.Esb&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d10p1:string&gt;&lt;d10p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d10p1:string&gt;&lt;d10p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d10p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Typeb415afce9cf4f89bddb3ba1b318211&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessagePipelineExecutionPipelineStep"&gt;&lt;Bindings xmlns:d10p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;c8ba6d86-01f9-41a5-ab49-147377510b38&lt;/Id&gt;&lt;Name&gt;Validate Transaction Date&lt;/Name&gt;&lt;Uniquename /&gt;&lt;d6p1:FileName i:nil="true" /&gt;&lt;d6p1:MaxInstances&gt;100&lt;/d6p1:MaxInstances&gt;&lt;d6p1:PipelineName&gt;Validate Date Time Format&lt;/d6p1:PipelineName&gt;&lt;d6p1:PoolTimeout&gt;PT1M&lt;/d6p1:PoolTimeout&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="DecisionPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d10p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;07355295-47c3-435e-8aec-8b66a7539cfa&lt;/Id&gt;&lt;Name&gt;Decision&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Branches&gt;&lt;BranchOfESBMessagexAPWb1W4&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Condition i:type="CodeBranchConditionOfESBMessagexAPWb1W4"&gt;&lt;Code&gt;if (context.Data.GetProperty("Neo", "DateTimeValid").ToUpper() == "TRUE")
	return true;
else
	return false;&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d13p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d13p1:string&gt;Neuron&lt;/d13p1:string&gt;&lt;d13p1:string&gt;Neuron.Pipelines&lt;/d13p1:string&gt;&lt;d13p1:string&gt;Neuron.Esb&lt;/d13p1:string&gt;&lt;d13p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d13p1:string&gt;&lt;d13p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d13p1:string&gt;&lt;d13p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d13p1:string&gt;&lt;d13p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d13p1:string&gt;&lt;d13p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d13p1:string&gt;&lt;d13p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d13p1:string&gt;&lt;d13p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d13p1:string&gt;&lt;d13p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d13p1:string&gt;&lt;d13p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d13p1:string&gt;&lt;d13p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d13p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;/Condition&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;EndJoined&gt;false&lt;/EndJoined&gt;&lt;Name&gt;If&lt;/Name&gt;&lt;Steps&gt;&lt;Bindings xmlns:d13p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;ff6726bd-029c-4bcf-ac67-3196401ccd43&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d15p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;defa9b3a-bd3d-4b52-93fe-5b9cff178e0f&lt;/Id&gt;&lt;Name&gt;Map To External System Request&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d15p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;// Retrieve the response template message
string externalSystemRequestTemplate = context.Configuration.XmlDocs["ExternalSystemRequest"].Xml;
	
string message = System.Net.WebUtility.HtmlEncode (context.Properties["OrigMsg"].ToString());

// Create the response message
string externalSystemRequest = string.Format(externalSystemRequestTemplate, context.Properties["TransactionID"], context.Properties["SourceSystemID"], "false", message);

//Send the trace message to document the response message.
context.Instance.TraceInformation ("Process Material Definition - Message ID: " + context.Data.Header.MessageId.ToString() + " Request Message: " + externalSystemRequest);
	
// Set message context to the response message 	
context.Data.Text = externalSystemRequest;&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d15p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d15p1:string&gt;Neuron&lt;/d15p1:string&gt;&lt;d15p1:string&gt;Neuron.Pipelines&lt;/d15p1:string&gt;&lt;d15p1:string&gt;Neuron.Esb&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d15p1:string&gt;&lt;d15p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d15p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Typef22c203e6ef45649ef942ac03202bf&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessagePipelineExecutionPipelineStep"&gt;&lt;Bindings xmlns:d15p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;1f2717dc-3cfa-4287-bd76-5d490bfa6afc&lt;/Id&gt;&lt;Name&gt;External System Request&lt;/Name&gt;&lt;Uniquename /&gt;&lt;d6p1:FileName i:nil="true" /&gt;&lt;d6p1:MaxInstances&gt;100&lt;/d6p1:MaxInstances&gt;&lt;d6p1:PipelineName&gt;Process_GetExternalSystemUID - New&lt;/d6p1:PipelineName&gt;&lt;d6p1:PoolTimeout&gt;PT1M&lt;/d6p1:PoolTimeout&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d15p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;b6c31f45-32f9-401a-8ae3-31fee119aa66&lt;/Id&gt;&lt;Name&gt;Map From External System Response&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d15p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;string externalSystemUID = context.Data.ToXmlDocument().SelectSingleNode("/*[local-name()='ExternalSystemResponse' and namespace-uri()='http://NeoPLM.com/EnterpriseIntegration']/*[local-name()='SourceSystemUID' and namespace-uri()='http://NeoPLM.com/EnterpriseIntegration']").InnerText;

context.Properties ["NeoExternalSystemUID"] = externalSystemUID;

context.Instance.TraceInformation ("Process Material Definition - Transaction ID: " + context.Properties["TransactionID"] + " ExternalSystemUID: " + context.Properties["NeoExternalSystemUID"]);&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d15p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d15p1:string&gt;Neuron&lt;/d15p1:string&gt;&lt;d15p1:string&gt;Neuron.Pipelines&lt;/d15p1:string&gt;&lt;d15p1:string&gt;Neuron.Esb&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d15p1:string&gt;&lt;d15p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d15p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Typedbf0c491dad4e2f872049fb2e84cb8&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="DecisionPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d15p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;cb2b2800-8a15-4ac3-8ab9-58d6d90469aa&lt;/Id&gt;&lt;Name&gt;Decision&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Branches&gt;&lt;BranchOfESBMessagexAPWb1W4&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Condition i:type="CodeBranchConditionOfESBMessagexAPWb1W4"&gt;&lt;Code&gt;if (context.Data.GetProperty("NeoPLM", "LookupError").ToUpper() == "FALSE")
{
	return true;
}
else
{
	return false;
}	&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d18p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d18p1:string&gt;Neuron&lt;/d18p1:string&gt;&lt;d18p1:string&gt;Neuron.Pipelines&lt;/d18p1:string&gt;&lt;d18p1:string&gt;Neuron.Esb&lt;/d18p1:string&gt;&lt;d18p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d18p1:string&gt;&lt;d18p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d18p1:string&gt;&lt;d18p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d18p1:string&gt;&lt;d18p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d18p1:string&gt;&lt;d18p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d18p1:string&gt;&lt;d18p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d18p1:string&gt;&lt;d18p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d18p1:string&gt;&lt;d18p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d18p1:string&gt;&lt;d18p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d18p1:string&gt;&lt;d18p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d18p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;/Condition&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;EndJoined&gt;false&lt;/EndJoined&gt;&lt;Name&gt;If&lt;/Name&gt;&lt;Steps&gt;&lt;Bindings xmlns:d18p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;f84acd9a-4808-4cda-9a3b-140020523290&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="ForEachPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d20p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;18996ba1-fb30-4a5a-b673-4ea570f1392b&lt;/Id&gt;&lt;Name&gt;Loop Through Material Definitions&lt;/Name&gt;&lt;Uniquename&gt;17219936-dea7-4838-9249-e6822e1326f4&lt;/Uniquename&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d22p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;a8a4e8e1-9290-4874-a9f5-38560e0ded18&lt;/Id&gt;&lt;Name&gt;Init Vars&lt;/Name&gt;&lt;Uniquename&gt;3f8cdf08-cdc6-425b-b70a-94d201f2d0ba&lt;/Uniquename&gt;&lt;BreakPointLines xmlns:d22p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;// Retrieve the current Material Definition from the loop shape
var materialDefinition = (System.Xml.XmlNode) context.Properties["MaterialDefinition"];

// Create strings to contain the message values.  Set them equal to the empty string, in case they don't appear in the message.
// Required / Optional and date type testing are expected to be performed at the 
string plantID = "";
string materialID = "";
string materialDescription = "";
string inventoryUnitofMeasureID = "";
string materialType = "";
string effectivityStartDate = "";
string effectivityEndDate = "";
string neoGlobalMaterialSpecificationID = "";
string neoGlobalMaterialSpecificationDescription = "";
string materialParameters = "";

// Iterate over the current material definition
foreach(System.Xml.XmlNode node in materialDefinition.ChildNodes)
{
	if (node.LocalName == "PlantCodeID") {plantID = node.InnerText;}
	if (node.LocalName == "MaterialID") {materialID = node.InnerText;}
	if (node.LocalName == "Description") {materialDescription = node.InnerText;}
	if (node.LocalName == "InventoryUnitofMeasure") {inventoryUnitofMeasureID = node.InnerText;}
	if (node.LocalName == "MaterialType") {materialType = node.InnerText;}
	if (node.LocalName == "EffectivityStartDate") {effectivityStartDate = node.InnerText;}
	if (node.LocalName == "EffectivityEndDate") {effectivityEndDate = node.InnerText;}
	if (node.LocalName == "NeoGlobalMaterialSpecificationID") {neoGlobalMaterialSpecificationID = node.InnerText;}
	if (node.LocalName == "NeoPLMGlobalSpecificationDescription") {neoGlobalMaterialSpecificationDescription = node.InnerText;}
	if (node.LocalName == "Parameter") {materialParameters = node.OuterXml;}

}

// Date Time Overrides
if (string.IsNullOrEmpty(effectivityStartDate))
{
	effectivityStartDate = System.DateTime.MinValue.ToString("yyyy-MM-ddTHH:mm:ssZ");
}

if (string.IsNullOrEmpty(effectivityEndDate))
{
	effectivityEndDate = System.DateTime.MaxValue.ToString("yyyy-MM-ddTHH:mm:ssZ");
}

// Set Properties to values....
context.Properties["PlantID"] = plantID;
context.Properties["MaterialID"] = materialID;
context.Properties["MaterialDescription"] = materialDescription;
context.Properties["InventoryUnitofMeasureID"] = inventoryUnitofMeasureID;
context.Properties["MaterialType"] = materialType;
context.Properties["EffectivityStartDate"] = effectivityStartDate;
context.Properties["EffectivityEndDate"] = effectivityEndDate;
context.Properties["NeoGlobalMaterialSpecificationID"] = neoGlobalMaterialSpecificationID;
context.Properties["NeoGlobalMaterialSpecificationDescription"] = neoGlobalMaterialSpecificationDescription;
context.Properties["MaterialParameters"] = materialParameters;
&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d22p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d22p1:string&gt;Neuron&lt;/d22p1:string&gt;&lt;d22p1:string&gt;Neuron.Pipelines&lt;/d22p1:string&gt;&lt;d22p1:string&gt;Neuron.Esb&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type71a31839f0e4065a27b5fedb808af3&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d22p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;3513a19d-29a5-4442-b989-5a72b37aae2b&lt;/Id&gt;&lt;Name&gt;Trace Material Definition&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d22p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;context.Instance.TraceInformation ("***********************************************************************************************");
context.Instance.TraceInformation ("Looping Over the Next Material");
context.Instance.TraceInformation ("   Plant ID: " + context.Properties["PlantID"]);
context.Instance.TraceInformation ("   Material ID: " + context.Properties["MaterialID"]);
context.Instance.TraceInformation ("   Material Description: " + context.Properties["MaterialDescription"]);
context.Instance.TraceInformation ("   Inventory Unit of Measure: " + context.Properties["InventoryUnitofMeasureID"]);
context.Instance.TraceInformation ("   Material Type: " + context.Properties["MaterialType"]);
context.Instance.TraceInformation ("   Effectivity Start Date: " + context.Properties["EffectivityStartDate"]);
context.Instance.TraceInformation ("   Effectivity End Date: " + context.Properties["EffectivityEndDate"]);
context.Instance.TraceInformation ("   NeoGlobalMaterialSpecificationID: " + context.Properties["NeoGlobalMaterialSpecificationID"]);
context.Instance.TraceInformation ("   NeoGlobalMaterialSpecificationDescription: " + context.Properties["NeoGlobalMaterialSpecificationDescription"]);
context.Instance.TraceInformation ("   MaterialParameters: " + context.Properties["MaterialParameters"]);
&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d22p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d22p1:string&gt;Neuron&lt;/d22p1:string&gt;&lt;d22p1:string&gt;Neuron.Pipelines&lt;/d22p1:string&gt;&lt;d22p1:string&gt;Neuron.Esb&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d22p1:string&gt;&lt;d22p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d22p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Typeb05bfbd15a042079d3068f0bcbbcaf&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d22p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;9407b51f-1df1-4047-a120-95dbb17c17e9&lt;/Id&gt;&lt;Name&gt;Map Effectivity Start Date&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d22p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;// Retrieve the response template message
string dateTimeValidationRequestTemplate = context.Configuration.XmlDocs["DateTimeValidationRequest"].Xml;
	
System.Xml.XmlNode node = (System.Xml.XmlNode) context.Properties["MaterialDefinition"];

string message = System.Net.WebUtility.HtmlEncode (node.OuterXml.ToString());

string startTime = (context.Properties["EffectivityStartDate"].ToString());

// Create the response message
string dateTimeValidationRequest = string.Format(dateTimeValidationRequestTemplate, context.Properties["TransactionID"], context.Properties["SourceSystemID"], context.Properties["PlantID"], "EffectivityStartDate", startTime, message);

//Send the trace message to document the response message.
context.Instance.TraceInformation ("Process Material Definition - Message ID: " + context.Data.Header.MessageId.ToString() + " Request Message: " + dateTimeValidationRequest);
	
// Set message context to the response message 	
context.Data.Text = dateTimeValidationRequest;

&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d22p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d22p1:string&gt;Neuron&lt;/d22p1:string&gt;&lt;d22p1:string&gt;Neuron.Pipelines&lt;/d22p1:string&gt;&lt;d22p1:string&gt;Neuron.Esb&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d22p1:string&gt;&lt;d22p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d22p1:string&gt;&lt;d22p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d22p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type5733220d41b4532bec831ed6796401&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessagePipelineExecutionPipelineStep"&gt;&lt;Bindings xmlns:d22p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;06f1d6b8-86e9-4ad5-880c-4a7bd5d402df&lt;/Id&gt;&lt;Name&gt;Validate Effectivity Start Date&lt;/Name&gt;&lt;Uniquename /&gt;&lt;d6p1:FileName i:nil="true" /&gt;&lt;d6p1:MaxInstances&gt;100&lt;/d6p1:MaxInstances&gt;&lt;d6p1:PipelineName&gt;Validate Date Time Format&lt;/d6p1:PipelineName&gt;&lt;d6p1:PoolTimeout&gt;PT1M&lt;/d6p1:PoolTimeout&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="DecisionPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d22p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;c54e2bc9-54f5-47db-8fe2-d8b650ab9206&lt;/Id&gt;&lt;Name&gt;Decision&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Branches&gt;&lt;BranchOfESBMessagexAPWb1W4&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Condition i:type="CodeBranchConditionOfESBMessagexAPWb1W4"&gt;&lt;Code&gt;if (context.Data.GetProperty("Neo", "DateTimeValid").ToUpper() == "TRUE")
	return true;
else
	return false;&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d25p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d25p1:string&gt;Neuron&lt;/d25p1:string&gt;&lt;d25p1:string&gt;Neuron.Pipelines&lt;/d25p1:string&gt;&lt;d25p1:string&gt;Neuron.Esb&lt;/d25p1:string&gt;&lt;d25p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d25p1:string&gt;&lt;d25p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d25p1:string&gt;&lt;d25p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d25p1:string&gt;&lt;d25p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d25p1:string&gt;&lt;d25p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d25p1:string&gt;&lt;d25p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d25p1:string&gt;&lt;d25p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d25p1:string&gt;&lt;d25p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d25p1:string&gt;&lt;d25p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d25p1:string&gt;&lt;d25p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d25p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;/Condition&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;EndJoined&gt;false&lt;/EndJoined&gt;&lt;Name&gt;If&lt;/Name&gt;&lt;Steps&gt;&lt;Bindings xmlns:d25p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;a636f967-f683-4e00-9aae-0a19b5a9a150&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d27p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;227615be-7eb5-4ca6-8594-bd39f3ae7d7a&lt;/Id&gt;&lt;Name&gt;Map Effectivity End Date&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d27p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;context.Instance.TraceInformation (context.Properties["EffectivityStartDate"].ToString());

// Retrieve the response template message
string dateTimeValidationRequestTemplate = context.Configuration.XmlDocs["DateTimeValidationRequest"].Xml;
	
System.Xml.XmlNode node = (System.Xml.XmlNode) context.Properties["MaterialDefinition"];

string message = System.Net.WebUtility.HtmlEncode (node.OuterXml.ToString());

// Create the response message
string dateTimeValidationRequest = string.Format(dateTimeValidationRequestTemplate, context.Properties["TransactionID"], context.Properties["SourceSystemID"], context.Properties["PlantID"], "EffectivityEndDate", context.Properties["EffectivityEndDate"].ToString(), message);

//Send the trace message to document the response message.
context.Instance.TraceInformation ("Process Material Definition - Message ID: " + context.Data.Header.MessageId.ToString() + " Request Message: " + dateTimeValidationRequest);
	
// Set message context to the response message 	
context.Data.Text = dateTimeValidationRequest;&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d27p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d27p1:string&gt;Neuron&lt;/d27p1:string&gt;&lt;d27p1:string&gt;Neuron.Pipelines&lt;/d27p1:string&gt;&lt;d27p1:string&gt;Neuron.Esb&lt;/d27p1:string&gt;&lt;d27p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d27p1:string&gt;&lt;d27p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d27p1:string&gt;&lt;d27p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d27p1:string&gt;&lt;d27p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d27p1:string&gt;&lt;d27p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d27p1:string&gt;&lt;d27p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d27p1:string&gt;&lt;d27p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d27p1:string&gt;&lt;d27p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d27p1:string&gt;&lt;d27p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d27p1:string&gt;&lt;d27p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d27p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Typed7de20c483b4d32b9b8e9f8d172018&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessagePipelineExecutionPipelineStep"&gt;&lt;Bindings xmlns:d27p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;6d40f79e-e883-4d97-95fd-e299cb8316ed&lt;/Id&gt;&lt;Name&gt;Validate Effectivity End Date&lt;/Name&gt;&lt;Uniquename /&gt;&lt;d6p1:FileName i:nil="true" /&gt;&lt;d6p1:MaxInstances&gt;100&lt;/d6p1:MaxInstances&gt;&lt;d6p1:PipelineName&gt;Validate Date Time Format&lt;/d6p1:PipelineName&gt;&lt;d6p1:PoolTimeout&gt;PT1M&lt;/d6p1:PoolTimeout&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="DecisionPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d27p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;96457caf-026f-4043-a14d-8653b3ec1477&lt;/Id&gt;&lt;Name&gt;Decision&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Branches&gt;&lt;BranchOfESBMessagexAPWb1W4&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Condition i:type="CodeBranchConditionOfESBMessagexAPWb1W4"&gt;&lt;Code&gt;if (context.Data.GetProperty("Neo", "DateTimeValid").ToUpper() == "TRUE")
	return true;
else
	return false;&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d30p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d30p1:string&gt;Neuron&lt;/d30p1:string&gt;&lt;d30p1:string&gt;Neuron.Pipelines&lt;/d30p1:string&gt;&lt;d30p1:string&gt;Neuron.Esb&lt;/d30p1:string&gt;&lt;d30p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d30p1:string&gt;&lt;d30p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d30p1:string&gt;&lt;d30p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d30p1:string&gt;&lt;d30p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d30p1:string&gt;&lt;d30p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d30p1:string&gt;&lt;d30p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d30p1:string&gt;&lt;d30p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d30p1:string&gt;&lt;d30p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d30p1:string&gt;&lt;d30p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d30p1:string&gt;&lt;d30p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d30p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;/Condition&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;EndJoined&gt;false&lt;/EndJoined&gt;&lt;Name&gt;If&lt;/Name&gt;&lt;Steps&gt;&lt;Bindings xmlns:d30p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;98bae36f-40c9-4608-a658-eaa3caf596df&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d32p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;e0553ec6-3ee6-4fef-b922-9f5b8cb70a61&lt;/Id&gt;&lt;Name&gt;Map To Get Facility Input&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d32p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;
// Retrieve the response template message
string facilityRequestTemplate = context.Configuration.XmlDocs["FacilityRequest"].Xml;
	
System.Xml.XmlNode node = (System.Xml.XmlNode) context.Properties["MaterialDefinition"];

string message = System.Net.WebUtility.HtmlEncode (node.OuterXml.ToString());

// Create the response message
string facilityRequest = string.Format(facilityRequestTemplate, context.Properties["TransactionID"], context.Properties["SourceSystemID"], context.Properties["PlantID"], "false", message);

//Send the trace message to document the response message.
context.Instance.TraceInformation ("Process Material Definition - Message ID: " + context.Data.Header.MessageId.ToString() + " Request Message: " + facilityRequest);
	
// Set message context to the response message 	
context.Data.Text = facilityRequest;
&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d32p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d32p1:string&gt;Neuron&lt;/d32p1:string&gt;&lt;d32p1:string&gt;Neuron.Pipelines&lt;/d32p1:string&gt;&lt;d32p1:string&gt;Neuron.Esb&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d32p1:string&gt;&lt;d32p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d32p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type79d7eb1c9874c578f2636fbc4d8e9e&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessagePipelineExecutionPipelineStep"&gt;&lt;Bindings xmlns:d32p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;7437b316-bdf5-4b06-aca3-bbf1a598f021&lt;/Id&gt;&lt;Name&gt;Get Facility UID&lt;/Name&gt;&lt;Uniquename&gt;f114f435-a895-4fcf-9007-2594bff8c377&lt;/Uniquename&gt;&lt;d6p1:FileName i:nil="true" /&gt;&lt;d6p1:MaxInstances&gt;100&lt;/d6p1:MaxInstances&gt;&lt;d6p1:PipelineName&gt;Process_GetFacilityUID - New&lt;/d6p1:PipelineName&gt;&lt;d6p1:PoolTimeout&gt;PT1M&lt;/d6p1:PoolTimeout&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d32p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;254fd02d-d4f5-4265-9b46-26b0524cd905&lt;/Id&gt;&lt;Name&gt;Map From Get Facility Output&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d32p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;string facilityUID = context.Data.ToXmlDocument().SelectSingleNode("/*[local-name()='FacilityResponse' and namespace-uri()='http://NeoPLM.com/EnterpriseIntegration']/*[local-name()='FacilityUID' and namespace-uri()='http://NeoPLM.com/EnterpriseIntegration']").InnerText;

context.Properties ["FacilityUID"] = facilityUID;

context.Instance.TraceInformation ("Process Material Definition - Transaction ID: " + context.Properties["TransactionID"] + " FacilityUID: " + context.Properties["FacilityUID"]);&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d32p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d32p1:string&gt;Neuron&lt;/d32p1:string&gt;&lt;d32p1:string&gt;Neuron.Pipelines&lt;/d32p1:string&gt;&lt;d32p1:string&gt;Neuron.Esb&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d32p1:string&gt;&lt;d32p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d32p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type60a4ef5a2374b5f8cef8adf909b712&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="DecisionPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d32p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;1290d53f-dddb-4140-a90a-be09895d56b0&lt;/Id&gt;&lt;Name&gt;Decision&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Branches&gt;&lt;BranchOfESBMessagexAPWb1W4&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Condition i:type="CodeBranchConditionOfESBMessagexAPWb1W4"&gt;&lt;Code&gt;if (context.Data.GetProperty("NeoPLM", "LookupError").ToUpper() == "FALSE")
{
	return true;
}
else
{
	return false;
}	&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d35p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d35p1:string&gt;Neuron&lt;/d35p1:string&gt;&lt;d35p1:string&gt;Neuron.Pipelines&lt;/d35p1:string&gt;&lt;d35p1:string&gt;Neuron.Esb&lt;/d35p1:string&gt;&lt;d35p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d35p1:string&gt;&lt;d35p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d35p1:string&gt;&lt;d35p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d35p1:string&gt;&lt;d35p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d35p1:string&gt;&lt;d35p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d35p1:string&gt;&lt;d35p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d35p1:string&gt;&lt;d35p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d35p1:string&gt;&lt;d35p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d35p1:string&gt;&lt;d35p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d35p1:string&gt;&lt;d35p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d35p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;/Condition&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;EndJoined&gt;false&lt;/EndJoined&gt;&lt;Name&gt;If&lt;/Name&gt;&lt;Steps&gt;&lt;Bindings xmlns:d35p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;d626f6ff-d61d-42ec-90f2-9bd0f21f4874&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d37p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;49bf4882-d6f0-4e35-a3da-55a07941f3b9&lt;/Id&gt;&lt;Name&gt;Map To Get Plant Code Input&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d37p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;// Retrieve the response template message
string plantCodeRequestTemplate = context.Configuration.XmlDocs["PlantCodeRequest"].Xml;
	
System.Xml.XmlNode node = (System.Xml.XmlNode) context.Properties["MaterialDefinition"];

string message = System.Net.WebUtility.HtmlEncode (node.OuterXml.ToString());

// Create the response message
string plantCodeRequest = string.Format(plantCodeRequestTemplate, context.Properties["TransactionID"], context.Properties["FacilityUID"], context.Properties["PlantID"], "false", message);

//Send the trace message to document the response message.
context.Instance.TraceInformation ("Process Material Definition - Message ID: " + context.Data.Header.MessageId.ToString() + " Request Message: " + plantCodeRequest);
	
// Set message context to the response message 	
context.Data.Text = plantCodeRequest;&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d37p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d37p1:string&gt;Neuron&lt;/d37p1:string&gt;&lt;d37p1:string&gt;Neuron.Pipelines&lt;/d37p1:string&gt;&lt;d37p1:string&gt;Neuron.Esb&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d37p1:string&gt;&lt;d37p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d37p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type79d7eb1c9874c578f2636fbc4d8e9e&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessagePipelineExecutionPipelineStep"&gt;&lt;Bindings xmlns:d37p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;9e28f1c2-1f4e-4bd4-92b7-a03f51d63ff7&lt;/Id&gt;&lt;Name&gt;Get Plant Code UID&lt;/Name&gt;&lt;Uniquename&gt;f114f435-a895-4fcf-9007-2594bff8c377&lt;/Uniquename&gt;&lt;d6p1:FileName i:nil="true" /&gt;&lt;d6p1:MaxInstances&gt;100&lt;/d6p1:MaxInstances&gt;&lt;d6p1:PipelineName&gt;Process_GetPlantCodeUID - New&lt;/d6p1:PipelineName&gt;&lt;d6p1:PoolTimeout&gt;PT1M&lt;/d6p1:PoolTimeout&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d37p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;a955dd8f-2eb7-462e-9972-564ad524a76a&lt;/Id&gt;&lt;Name&gt;Map From Get Plant Code Output&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d37p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;string plantCodeUID = context.Data.ToXmlDocument().SelectSingleNode("/*[local-name()='PlantCodeResponse' and namespace-uri()='http://NeoPLM.com/EnterpriseIntegration']/*[local-name()='NeoPLMPlantCodeUID' and namespace-uri()='http://NeoPLM.com/EnterpriseIntegration']").InnerText;

context.Properties ["PlantCodeUID"] = plantCodeUID;

context.Instance.TraceInformation ("Process Material Definition - Transaction ID: " + context.Properties["TransactionID"] + " PlantCodeUID: " + context.Properties["PlantCodeUID"]);&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d37p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d37p1:string&gt;Neuron&lt;/d37p1:string&gt;&lt;d37p1:string&gt;Neuron.Pipelines&lt;/d37p1:string&gt;&lt;d37p1:string&gt;Neuron.Esb&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d37p1:string&gt;&lt;d37p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d37p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type60a4ef5a2374b5f8cef8adf909b712&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="DecisionPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d37p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;175c3bd6-2b53-4c3d-9a10-3bc36656c60d&lt;/Id&gt;&lt;Name&gt;Decision&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Branches&gt;&lt;BranchOfESBMessagexAPWb1W4&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Condition i:type="CodeBranchConditionOfESBMessagexAPWb1W4"&gt;&lt;Code&gt;if (context.Data.GetProperty("NeoPLM", "LookupError").ToUpper() == "FALSE")
{
	return true;
}
else
{
	return false;
}	&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d40p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d40p1:string&gt;Neuron&lt;/d40p1:string&gt;&lt;d40p1:string&gt;Neuron.Pipelines&lt;/d40p1:string&gt;&lt;d40p1:string&gt;Neuron.Esb&lt;/d40p1:string&gt;&lt;d40p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d40p1:string&gt;&lt;d40p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d40p1:string&gt;&lt;d40p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d40p1:string&gt;&lt;d40p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d40p1:string&gt;&lt;d40p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d40p1:string&gt;&lt;d40p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d40p1:string&gt;&lt;d40p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d40p1:string&gt;&lt;d40p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d40p1:string&gt;&lt;d40p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d40p1:string&gt;&lt;d40p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d40p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;/Condition&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;EndJoined&gt;false&lt;/EndJoined&gt;&lt;Name&gt;If&lt;/Name&gt;&lt;Steps&gt;&lt;Bindings xmlns:d40p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;e6032028-5964-4a62-961c-78ea6e629b86&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d42p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;9c311390-dce5-4993-8f27-6c91d6974849&lt;/Id&gt;&lt;Name&gt;Map To Get Engineering Unit Input&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d42p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;// Retrieve the response template message
string engineeringUnitRequestTemplate = context.Configuration.XmlDocs["EngineeringUnitRequest"].Xml;
	
System.Xml.XmlNode node = (System.Xml.XmlNode) context.Properties["MaterialDefinition"];

string message = System.Net.WebUtility.HtmlEncode (node.OuterXml.ToString());

// Create the request message
string engineeringUnitRequest = string.Format(engineeringUnitRequestTemplate, context.Properties["TransactionID"], context.Properties["SourceSystemID"], context.Properties["InventoryUnitofMeasureID"], "false", message);

//Send the trace message to document the request message.
context.Instance.TraceInformation ("Process Material Definition - Message ID: " + context.Data.Header.MessageId.ToString() + " Request Message: " + engineeringUnitRequest);
	
// Set message context to the request message 	
context.Data.Text = engineeringUnitRequest;&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d42p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d42p1:string&gt;Neuron&lt;/d42p1:string&gt;&lt;d42p1:string&gt;Neuron.Pipelines&lt;/d42p1:string&gt;&lt;d42p1:string&gt;Neuron.Esb&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d42p1:string&gt;&lt;d42p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d42p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type79d7eb1c9874c578f2636fbc4d8e9e&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessagePipelineExecutionPipelineStep"&gt;&lt;Bindings xmlns:d42p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;73c3bfee-8b84-4127-9ecf-733ec6ad0aaa&lt;/Id&gt;&lt;Name&gt;Get EngineeringUnit UID&lt;/Name&gt;&lt;Uniquename&gt;f114f435-a895-4fcf-9007-2594bff8c377&lt;/Uniquename&gt;&lt;d6p1:FileName i:nil="true" /&gt;&lt;d6p1:MaxInstances&gt;100&lt;/d6p1:MaxInstances&gt;&lt;d6p1:PipelineName&gt;Process_GetEngineeringUID - New&lt;/d6p1:PipelineName&gt;&lt;d6p1:PoolTimeout&gt;PT1M&lt;/d6p1:PoolTimeout&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d42p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;b8168ff9-60b4-4233-9557-fea8c3d8cbc6&lt;/Id&gt;&lt;Name&gt;Map From Get Engineering Unit 'Code Output&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d42p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;string engineeringUnitUID = context.Data.ToXmlDocument().SelectSingleNode("/*[local-name()='EngineeringUnitLookupResponse' and namespace-uri()='http://NeoPLM.com/EnterpriseIntegration']/*[local-name()='NeoPLMEngineeringUnitUID' and namespace-uri()='http://NeoPLM.com/EnterpriseIntegration']").InnerText;

context.Properties ["EngineeringUnitUID"] = engineeringUnitUID;

context.Instance.TraceInformation ("Process Material Definition - Transaction ID: " + context.Properties["TransactionID"] + " EngineeeringUnitUID: " + context.Properties["EngineeringUnitUID"]);&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d42p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d42p1:string&gt;Neuron&lt;/d42p1:string&gt;&lt;d42p1:string&gt;Neuron.Pipelines&lt;/d42p1:string&gt;&lt;d42p1:string&gt;Neuron.Esb&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d42p1:string&gt;&lt;d42p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d42p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type60a4ef5a2374b5f8cef8adf909b712&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="DecisionPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d42p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;373e51d9-3633-45a3-ad14-79dca085e050&lt;/Id&gt;&lt;Name&gt;Decision&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Branches&gt;&lt;BranchOfESBMessagexAPWb1W4&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Condition i:type="CodeBranchConditionOfESBMessagexAPWb1W4"&gt;&lt;Code&gt;if (context.Data.GetProperty("NeoPLM", "LookupError").ToUpper() == "FALSE")
{
	return true;
}
else
{
	return false;
}	&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d45p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d45p1:string&gt;Neuron&lt;/d45p1:string&gt;&lt;d45p1:string&gt;Neuron.Pipelines&lt;/d45p1:string&gt;&lt;d45p1:string&gt;Neuron.Esb&lt;/d45p1:string&gt;&lt;d45p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d45p1:string&gt;&lt;d45p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d45p1:string&gt;&lt;d45p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d45p1:string&gt;&lt;d45p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d45p1:string&gt;&lt;d45p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d45p1:string&gt;&lt;d45p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d45p1:string&gt;&lt;d45p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d45p1:string&gt;&lt;d45p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d45p1:string&gt;&lt;d45p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d45p1:string&gt;&lt;d45p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d45p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;/Condition&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;EndJoined&gt;false&lt;/EndJoined&gt;&lt;Name&gt;If&lt;/Name&gt;&lt;Steps&gt;&lt;Bindings xmlns:d45p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;7989e418-b162-40f1-8f67-8d2e2d4b7353&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d47p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;9a0da3a8-be20-4196-a69e-ceeaa83f20bc&lt;/Id&gt;&lt;Name&gt;Map To Local Service URI&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d47p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;// Retrieve the response template message
string localServiceURIRequestTemplate = context.Configuration.XmlDocs["LocalServiceURIRequest"].Xml;
	
System.Xml.XmlNode node = (System.Xml.XmlNode) context.Properties["MaterialDefinition"];

string message = System.Net.WebUtility.HtmlEncode (node.OuterXml.ToString());

// Create the request message
string localServiceURIRequest = string.Format(localServiceURIRequestTemplate, context.Properties["TransactionID"], context.Properties["FacilityUID"], message);

//Send the trace message to document the request message.
context.Instance.TraceInformation ("Process Material Definition - Message ID: " + context.Data.Header.MessageId.ToString() + " Request Message: " + localServiceURIRequest);
	
// Set message context to the request message 	
context.Data.Text = localServiceURIRequest;&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d47p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d47p1:string&gt;Neuron&lt;/d47p1:string&gt;&lt;d47p1:string&gt;Neuron.Pipelines&lt;/d47p1:string&gt;&lt;d47p1:string&gt;Neuron.Esb&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d47p1:string&gt;&lt;d47p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d47p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Typee6709c0639547b19d45c41aa259d27&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessagePipelineExecutionPipelineStep"&gt;&lt;Bindings xmlns:d47p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;d6d2312b-8fb8-4952-94a1-6b598efb362e&lt;/Id&gt;&lt;Name&gt;Get Local Service URI&lt;/Name&gt;&lt;Uniquename /&gt;&lt;d6p1:FileName i:nil="true" /&gt;&lt;d6p1:MaxInstances&gt;100&lt;/d6p1:MaxInstances&gt;&lt;d6p1:PipelineName&gt;Process_GetLocalServiceURI - New&lt;/d6p1:PipelineName&gt;&lt;d6p1:PoolTimeout&gt;PT1M&lt;/d6p1:PoolTimeout&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d47p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;a7983883-c161-4cbf-8360-7fd261b1b466&lt;/Id&gt;&lt;Name&gt;Map From Local Service URI&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d47p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;string localServiceURI = context.Data.ToXmlDocument().SelectSingleNode("/*[local-name()='LocalServiceURIResponse' and namespace-uri()='http://NeoPLM.com/EnterpriseIntegration']/*[local-name()='LocalServiceURI' and namespace-uri()='http://NeoPLM.com/EnterpriseIntegration']").InnerText;

context.Properties ["LocalServiceURI"] = localServiceURI;

context.Instance.TraceInformation ("Process Material Definition - Transaction ID: " + context.Properties["TransactionID"] + " LocalServiceURI: " + context.Properties["LocalServiceURI"]);&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d47p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d47p1:string&gt;Neuron&lt;/d47p1:string&gt;&lt;d47p1:string&gt;Neuron.Pipelines&lt;/d47p1:string&gt;&lt;d47p1:string&gt;Neuron.Esb&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d47p1:string&gt;&lt;d47p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d47p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Typea1b60ddd5f04bb6961d10262d34d84&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="DecisionPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d47p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;bf4beacc-abf9-4964-9620-b65767da803f&lt;/Id&gt;&lt;Name&gt;Decision&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Branches&gt;&lt;BranchOfESBMessagexAPWb1W4&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Condition i:type="CodeBranchConditionOfESBMessagexAPWb1W4"&gt;&lt;Code&gt;if (context.Data.GetProperty("NeoPLM", "LookupError").ToUpper() == "FALSE")
{
	return true;
}
else
{
	return false;
}	&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d50p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d50p1:string&gt;Neuron&lt;/d50p1:string&gt;&lt;d50p1:string&gt;Neuron.Pipelines&lt;/d50p1:string&gt;&lt;d50p1:string&gt;Neuron.Esb&lt;/d50p1:string&gt;&lt;d50p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d50p1:string&gt;&lt;d50p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d50p1:string&gt;&lt;d50p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d50p1:string&gt;&lt;d50p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d50p1:string&gt;&lt;d50p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d50p1:string&gt;&lt;d50p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d50p1:string&gt;&lt;d50p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d50p1:string&gt;&lt;d50p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d50p1:string&gt;&lt;d50p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d50p1:string&gt;&lt;d50p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d50p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;/Condition&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;EndJoined&gt;false&lt;/EndJoined&gt;&lt;Name&gt;If&lt;/Name&gt;&lt;Steps&gt;&lt;Bindings xmlns:d50p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;45e36455-87b3-47ba-87c9-34cc7333673f&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d52p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;4ba7c80b-cb74-4cb6-bb54-9a10f0c00497&lt;/Id&gt;&lt;Name&gt;Map to Material Item Query&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d52p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;// Retrieve the response template message
string materialItemRequestTemplate = context.Configuration.XmlDocs["MaterialItemRequest"].Xml;
	
System.Xml.XmlNode node = (System.Xml.XmlNode) context.Properties["MaterialDefinition"];

string message = System.Net.WebUtility.HtmlEncode (node.OuterXml.ToString());

// Create the request message
string materialItemRequest = string.Format(materialItemRequestTemplate, context.Properties["TransactionID"], context.Properties["SourceSystemID"], context.Properties["PlantID"], context.Properties["MaterialID"], "true", message);

//Send the trace message to document the request message.
context.Instance.TraceInformation ("Process Material Definition - Message ID: " + context.Data.Header.MessageId.ToString() + " Request Message: " + materialItemRequest);
	
// Set message context to the request message 	
context.Data.Text = materialItemRequest;&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d52p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d52p1:string&gt;Neuron&lt;/d52p1:string&gt;&lt;d52p1:string&gt;Neuron.Pipelines&lt;/d52p1:string&gt;&lt;d52p1:string&gt;Neuron.Esb&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d52p1:string&gt;&lt;d52p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d52p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type6c56311f1634e6e899ab0b8e764885&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessagePipelineExecutionPipelineStep"&gt;&lt;Bindings xmlns:d52p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;c8ceb63b-31d0-4c12-8a5e-ab21ebf4ba91&lt;/Id&gt;&lt;Name&gt;Execute Material Master&lt;/Name&gt;&lt;Uniquename /&gt;&lt;d6p1:FileName i:nil="true" /&gt;&lt;d6p1:MaxInstances&gt;100&lt;/d6p1:MaxInstances&gt;&lt;d6p1:PipelineName&gt;Process_GetMaterialMasterUID_Or_ConsumableUID - New&lt;/d6p1:PipelineName&gt;&lt;d6p1:PoolTimeout&gt;PT1M&lt;/d6p1:PoolTimeout&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d52p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;13810654-71e7-415c-af45-e85ea89ef917&lt;/Id&gt;&lt;Name&gt;Map from Material Master&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d52p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;string materialItemUID = context.Data.ToXmlDocument().SelectSingleNode("/*[local-name()='MaterialMasterResponse' and namespace-uri()='http://NeoPLM.com/EnterpriseIntegration']/*[local-name()='NeoPLMMaterialMasterUID' and namespace-uri()='http://NeoPLM.com/EnterpriseIntegration']").InnerText;

context.Properties ["MaterialUID"] = materialItemUID;

context.Instance.TraceInformation ("Process Material Definition - Transaction ID: " + context.Properties["TransactionID"] + " MaterialUID: " + context.Properties["MaterialUID"]);

string neoMaterialMasterType = context.Data.ToXmlDocument().SelectSingleNode("/*[local-name()='MaterialMasterResponse' and namespace-uri()='http://NeoPLM.com/EnterpriseIntegration']/*[local-name()='NeoPLMMaterialMasterType' and namespace-uri()='http://NeoPLM.com/EnterpriseIntegration']").InnerText;

context.Properties ["NeoMaterialMasterType"] = neoMaterialMasterType;

context.Instance.TraceInformation ("Process Material Definition - Transaction ID: " + context.Properties["TransactionID"] + " Neo Material Type: " + context.Properties["NeoMaterialMasterType"]);&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d52p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d52p1:string&gt;Neuron&lt;/d52p1:string&gt;&lt;d52p1:string&gt;Neuron.Pipelines&lt;/d52p1:string&gt;&lt;d52p1:string&gt;Neuron.Esb&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d52p1:string&gt;&lt;d52p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d52p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type1d9b27d668d45468569cf69998254f&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d52p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;cd9c5a7f-5c79-45ac-a1b3-386a3ccb2906&lt;/Id&gt;&lt;Name&gt;Map to Save&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d52p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;// Retrieve the response template message
string localMaterialSpecificationTemplate = context.Configuration.XmlDocs["LocalMaterialSpecificationRequest"].Xml;

// If the material is a known one, use the lookup result for the material type, else use the material type on the message to infer one.
string neoMaterialType = "1";
if (context.Properties["MaterialUID"].ToString() == System.Guid.Empty.ToString())
{

	string materialType = context.Properties["MaterialType"].ToString();
	if (materialType == "IM" || materialType == "TEMA" || materialType == "ZMH" || materialType == "ZNBW")
		neoMaterialType = "7";
	else
		neoMaterialType = "6";
}
else 
{
	neoMaterialType = context.Properties["NeoMaterialMasterType"].ToString();
}

string startTime = context.Properties["EffectivityStartDate"].ToString();
string endTime   = context.Properties["EffectivityEndDate"].ToString(); 

string materialDescription = System.Net.WebUtility.HtmlEncode (context.Properties["MaterialDescription"].ToString());
string additionalData = System.Net.WebUtility.HtmlEncode (context.Properties["MaterialParameters"].ToString());

// Create the request message
string localMaterialSpecificationRequest = string.Format(localMaterialSpecificationTemplate, context.Properties["NeoExternalSystemUID"], 
	                                       context.Properties["PlantID"], context.Properties["MaterialID"], neoMaterialType, 
	                                       materialDescription, context.Properties["InventoryUnitofMeasureID"], 
	                                       context.Properties["MaterialType"], startTime, endTime, additionalData);

//Send the trace message to document the request message.
context.Instance.TraceInformation ("Process Material Definition - Message ID: " + context.Data.Header.MessageId.ToString() + " Request Message: " + localMaterialSpecificationRequest);
	
// Set message context to the request message 	
context.Data.Text = localMaterialSpecificationRequest;
&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d52p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d52p1:string&gt;Neuron&lt;/d52p1:string&gt;&lt;d52p1:string&gt;Neuron.Pipelines&lt;/d52p1:string&gt;&lt;d52p1:string&gt;Neuron.Esb&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d52p1:string&gt;&lt;d52p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d52p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Typebf80b10ef1941d78b19a3eb77caa2f&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessagePipelineExecutionPipelineStep"&gt;&lt;Bindings xmlns:d52p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;9aa4fb55-827d-4691-8ad8-dc55ed52df7c&lt;/Id&gt;&lt;Name&gt;Create / Update Local Material Specification&lt;/Name&gt;&lt;Uniquename /&gt;&lt;d6p1:FileName i:nil="true" /&gt;&lt;d6p1:MaxInstances&gt;100&lt;/d6p1:MaxInstances&gt;&lt;d6p1:PipelineName&gt;Process_CreateUpdateLocalMaterialSpecification&lt;/d6p1:PipelineName&gt;&lt;d6p1:PoolTimeout&gt;PT1M&lt;/d6p1:PoolTimeout&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d52p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;7f49e6e2-2dc3-4104-a6d7-22b6d28a487d&lt;/Id&gt;&lt;Name&gt;Map To Message Arrival Notification&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d52p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;// Retrieve the response template message
string messageArrivalNotificationTemplate = context.Configuration.XmlDocs["ESB Message Arrival Notification Message"].Xml;
	
System.Xml.XmlNode node = (System.Xml.XmlNode) context.Properties["MaterialDefinition"];

string message = System.Net.WebUtility.HtmlEncode (node.OuterXml.ToString());

// Get the data together to send the Business Error Message
string endpointAddress = context.Data.Header.To;
string eSBAction = context.Data.Header.Action;
string eSBTopic = context.Data.Header.Topic + "-MessageArrival";
string sourceSystemID = context.Properties["SourceSystemID"].ToString(); 
string plantID = context.Properties["PlantID"].ToString();
string transactionID = context.Properties["TransactionID"].ToString();
string messageDate = context.Data.Header.Created.ToString("yyyy-MM-ddTHH:mm:ssZ");

// Create the request message
string messageArrivalNotification = string.Format (messageArrivalNotificationTemplate, endpointAddress, 
	                                               eSBAction, eSBTopic, sourceSystemID, plantID, 
	                                               transactionID, messageDate, message);

//Send the trace message to document the request message.
context.Instance.TraceInformation ("Process Material Definition - Message ID: " + context.Data.Header.MessageId.ToString() + " Request Message: " + messageArrivalNotification);
	
// Set message context to the request message 	
context.Data.Text = messageArrivalNotification;&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d52p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d52p1:string&gt;Neuron&lt;/d52p1:string&gt;&lt;d52p1:string&gt;Neuron.Pipelines&lt;/d52p1:string&gt;&lt;d52p1:string&gt;Neuron.Esb&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d52p1:string&gt;&lt;d52p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d52p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type60603bd296e40bbb0cc0fdebdd9076&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessagePublishPipelineStep"&gt;&lt;Bindings xmlns:d52p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;91426ec0-ed5a-4332-9503-c29c74cb6fd3&lt;/Id&gt;&lt;Name&gt;Message Arrival Notification&lt;/Name&gt;&lt;Uniquename /&gt;&lt;d6p1:Semantic&gt;Multicast&lt;/d6p1:Semantic&gt;&lt;d6p1:Timeout&gt;0&lt;/d6p1:Timeout&gt;&lt;d6p1:TopicSelector i:type="d6p1:ESBMessageConstTopicSelector"&gt;&lt;d6p1:Topic&gt;MessageArrivalNotification&lt;/d6p1:Topic&gt;&lt;/d6p1:TopicSelector&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Steps&gt;&lt;/BranchOfESBMessagexAPWb1W4&gt;&lt;BranchOfESBMessagexAPWb1W4&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Condition i:type="AlwaysBranchConditionOfESBMessagexAPWb1W4" /&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;EndJoined&gt;false&lt;/EndJoined&gt;&lt;Name&gt;Else&lt;/Name&gt;&lt;Steps&gt;&lt;Bindings xmlns:d50p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;5fb70b59-0a79-4f81-aa1b-8b91053def84&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d52p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;32e8b687-c01a-4bed-b8af-c9064d78111f&lt;/Id&gt;&lt;Name&gt;Internal Tracing - ERP Local Service URI&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d52p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;context.Instance.TraceInformation ("Source System / Plant Code couldn't resolve to a valid Neo Local Service URI.");&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d52p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d52p1:string&gt;Neuron&lt;/d52p1:string&gt;&lt;d52p1:string&gt;Neuron.Pipelines&lt;/d52p1:string&gt;&lt;d52p1:string&gt;Neuron.Esb&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d52p1:string&gt;&lt;d52p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d52p1:string&gt;&lt;d52p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d52p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type8116962f77a4b0aaf7edfc5654be6c&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageTraceMessagePipelineStep"&gt;&lt;Bindings xmlns:d52p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;e6d9a66b-e50d-4516-af40-35cd088911e1&lt;/Id&gt;&lt;Name&gt;TraceMessage&lt;/Name&gt;&lt;Uniquename /&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Steps&gt;&lt;/BranchOfESBMessagexAPWb1W4&gt;&lt;/Branches&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Steps&gt;&lt;/BranchOfESBMessagexAPWb1W4&gt;&lt;BranchOfESBMessagexAPWb1W4&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Condition i:type="AlwaysBranchConditionOfESBMessagexAPWb1W4" /&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;EndJoined&gt;false&lt;/EndJoined&gt;&lt;Name&gt;Else&lt;/Name&gt;&lt;Steps&gt;&lt;Bindings xmlns:d45p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;451206a5-b908-4fb4-803c-4838fb015744&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d47p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;b024f47a-8b94-4591-9fcd-9020ba77c3f4&lt;/Id&gt;&lt;Name&gt;Internal Tracing - ERP Engineering Unit&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d47p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;context.Instance.TraceInformation ("Source System / Plant Code couldn't resolve to a valid Neo Engineering Unit.");&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d47p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d47p1:string&gt;Neuron&lt;/d47p1:string&gt;&lt;d47p1:string&gt;Neuron.Pipelines&lt;/d47p1:string&gt;&lt;d47p1:string&gt;Neuron.Esb&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d47p1:string&gt;&lt;d47p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d47p1:string&gt;&lt;d47p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d47p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type8116962f77a4b0aaf7edfc5654be6c&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Steps&gt;&lt;/BranchOfESBMessagexAPWb1W4&gt;&lt;/Branches&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Steps&gt;&lt;/BranchOfESBMessagexAPWb1W4&gt;&lt;BranchOfESBMessagexAPWb1W4&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Condition i:type="AlwaysBranchConditionOfESBMessagexAPWb1W4" /&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;EndJoined&gt;false&lt;/EndJoined&gt;&lt;Name&gt;Else&lt;/Name&gt;&lt;Steps&gt;&lt;Bindings xmlns:d40p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;178d121a-494b-4130-a67f-27b33a86c4e5&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d42p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;2e9cb571-b123-4098-bd70-61df8b17516a&lt;/Id&gt;&lt;Name&gt;Internal Tracing - ERP Plant&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d42p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;context.Instance.TraceInformation ("Source System / Plant Code couldn't resolve to a valid Neo ERP Plant.");&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d42p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d42p1:string&gt;Neuron&lt;/d42p1:string&gt;&lt;d42p1:string&gt;Neuron.Pipelines&lt;/d42p1:string&gt;&lt;d42p1:string&gt;Neuron.Esb&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d42p1:string&gt;&lt;d42p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d42p1:string&gt;&lt;d42p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d42p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type8116962f77a4b0aaf7edfc5654be6c&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Steps&gt;&lt;/BranchOfESBMessagexAPWb1W4&gt;&lt;/Branches&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Steps&gt;&lt;/BranchOfESBMessagexAPWb1W4&gt;&lt;BranchOfESBMessagexAPWb1W4&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Condition i:type="AlwaysBranchConditionOfESBMessagexAPWb1W4" /&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;EndJoined&gt;false&lt;/EndJoined&gt;&lt;Name&gt;Else&lt;/Name&gt;&lt;Steps&gt;&lt;Bindings xmlns:d35p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;6a90458b-684d-4e18-803f-9b5304757c78&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d37p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;e304dd0a-d41a-41ae-8729-b00aec7d9df8&lt;/Id&gt;&lt;Name&gt;Internal Tracing - Facility&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d37p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;context.Instance.TraceInformation ("Source System / Plant Code couldn't resolve to a valid Neo Facility.");&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d37p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d37p1:string&gt;Neuron&lt;/d37p1:string&gt;&lt;d37p1:string&gt;Neuron.Pipelines&lt;/d37p1:string&gt;&lt;d37p1:string&gt;Neuron.Esb&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d37p1:string&gt;&lt;d37p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d37p1:string&gt;&lt;d37p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d37p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type8116962f77a4b0aaf7edfc5654be6c&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Steps&gt;&lt;/BranchOfESBMessagexAPWb1W4&gt;&lt;/Branches&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Steps&gt;&lt;/BranchOfESBMessagexAPWb1W4&gt;&lt;BranchOfESBMessagexAPWb1W4&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Condition i:type="AlwaysBranchConditionOfESBMessagexAPWb1W4" /&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;EndJoined&gt;false&lt;/EndJoined&gt;&lt;Name&gt;Else&lt;/Name&gt;&lt;Steps&gt;&lt;Bindings xmlns:d30p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;266f4ca4-6586-4229-94e9-152dc1d89b5a&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d32p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;4f1244bb-40b4-4120-bc34-c93f5c93b50f&lt;/Id&gt;&lt;Name&gt;Internal Tracing - Effectivity End Date&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d32p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;context.Instance.TraceInformation ("Effectivity End Date is neither a UTC nor a Local Time Stamp.");&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d32p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d32p1:string&gt;Neuron&lt;/d32p1:string&gt;&lt;d32p1:string&gt;Neuron.Pipelines&lt;/d32p1:string&gt;&lt;d32p1:string&gt;Neuron.Esb&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d32p1:string&gt;&lt;d32p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d32p1:string&gt;&lt;d32p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d32p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type8116962f77a4b0aaf7edfc5654be6c&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Steps&gt;&lt;/BranchOfESBMessagexAPWb1W4&gt;&lt;/Branches&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Steps&gt;&lt;/BranchOfESBMessagexAPWb1W4&gt;&lt;BranchOfESBMessagexAPWb1W4&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Condition i:type="AlwaysBranchConditionOfESBMessagexAPWb1W4" /&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;EndJoined&gt;false&lt;/EndJoined&gt;&lt;Name&gt;Else&lt;/Name&gt;&lt;Steps&gt;&lt;Bindings xmlns:d25p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;63786899-1051-4a28-b638-bf434a0c0ba2&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d27p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;0b57bbc8-ce7d-44d7-8a92-08ce307027fe&lt;/Id&gt;&lt;Name&gt;Internal Tracing - Effectivity Start Date&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d27p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;context.Instance.TraceInformation ("Effectivity Start Date is neither a UTC nor a Local Time.");&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d27p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d27p1:string&gt;Neuron&lt;/d27p1:string&gt;&lt;d27p1:string&gt;Neuron.Pipelines&lt;/d27p1:string&gt;&lt;d27p1:string&gt;Neuron.Esb&lt;/d27p1:string&gt;&lt;d27p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d27p1:string&gt;&lt;d27p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d27p1:string&gt;&lt;d27p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d27p1:string&gt;&lt;d27p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d27p1:string&gt;&lt;d27p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d27p1:string&gt;&lt;d27p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d27p1:string&gt;&lt;d27p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d27p1:string&gt;&lt;d27p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d27p1:string&gt;&lt;d27p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d27p1:string&gt;&lt;d27p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d27p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type8116962f77a4b0aaf7edfc5654be6c&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Steps&gt;&lt;/BranchOfESBMessagexAPWb1W4&gt;&lt;/Branches&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;CollectionPropertyName&gt;MaterialDefinitions&lt;/CollectionPropertyName&gt;&lt;ItemPropertyName&gt;MaterialDefinition&lt;/ItemPropertyName&gt;&lt;TurnOffTrackExecution&gt;false&lt;/TurnOffTrackExecution&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Steps&gt;&lt;/BranchOfESBMessagexAPWb1W4&gt;&lt;BranchOfESBMessagexAPWb1W4&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Condition i:type="AlwaysBranchConditionOfESBMessagexAPWb1W4" /&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;EndJoined&gt;false&lt;/EndJoined&gt;&lt;Name&gt;Else&lt;/Name&gt;&lt;Steps&gt;&lt;Bindings xmlns:d18p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;0783ad0b-2910-4ecb-87e4-2aec1339e722&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d20p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;4fcb1e25-0efc-43bd-91b8-28c0afd34fc5&lt;/Id&gt;&lt;Name&gt;Internal Tracing - External System UID&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d20p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;context.Instance.TraceInformation ("The Neo External System could not be found.");&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d20p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d20p1:string&gt;Neuron&lt;/d20p1:string&gt;&lt;d20p1:string&gt;Neuron.Pipelines&lt;/d20p1:string&gt;&lt;d20p1:string&gt;Neuron.Esb&lt;/d20p1:string&gt;&lt;d20p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d20p1:string&gt;&lt;d20p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d20p1:string&gt;&lt;d20p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d20p1:string&gt;&lt;d20p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d20p1:string&gt;&lt;d20p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d20p1:string&gt;&lt;d20p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d20p1:string&gt;&lt;d20p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d20p1:string&gt;&lt;d20p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d20p1:string&gt;&lt;d20p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d20p1:string&gt;&lt;d20p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d20p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type8116962f77a4b0aaf7edfc5654be6c&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Steps&gt;&lt;/BranchOfESBMessagexAPWb1W4&gt;&lt;/Branches&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Steps&gt;&lt;/BranchOfESBMessagexAPWb1W4&gt;&lt;BranchOfESBMessagexAPWb1W4&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Condition i:type="AlwaysBranchConditionOfESBMessagexAPWb1W4" /&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;EndJoined&gt;false&lt;/EndJoined&gt;&lt;Name&gt;Else&lt;/Name&gt;&lt;Steps&gt;&lt;Bindings xmlns:d13p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;38b7ef51-98e5-439c-8ca1-bdc819ee96ad&lt;/Id&gt;&lt;Name&gt;Group&lt;/Name&gt;&lt;Uniquename /&gt;&lt;Children&gt;&lt;ESBMessagePipelineStep i:type="d6p1:EsbMessageCSharpCodePipelineStep"&gt;&lt;Bindings xmlns:d15p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;567b4c82-8a6f-445a-896f-f367441f49e3&lt;/Id&gt;&lt;Name&gt;Internal Tracing - Transaction Date&lt;/Name&gt;&lt;Uniquename /&gt;&lt;BreakPointLines xmlns:d15p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Code&gt;context.Instance.TraceInformation ("Message Creation Date is neither UTC nor Local Time.");&lt;/Code&gt;&lt;ReferencedAssemblies xmlns:d15p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays"&gt;&lt;d15p1:string&gt;Neuron&lt;/d15p1:string&gt;&lt;d15p1:string&gt;Neuron.Pipelines&lt;/d15p1:string&gt;&lt;d15p1:string&gt;Neuron.Esb&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System.Xml.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System.Data.DataSetExtensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System.Runtime.Serialization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089&lt;/d15p1:string&gt;&lt;d15p1:string&gt;Newtonsoft.Json, Version=8.0.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed&lt;/d15p1:string&gt;&lt;d15p1:string&gt;Microsoft.CSharp, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a&lt;/d15p1:string&gt;&lt;/ReferencedAssemblies&gt;&lt;TypeName&gt;Type8116962f77a4b0aaf7edfc5654be6c&lt;/TypeName&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Steps&gt;&lt;/BranchOfESBMessagexAPWb1W4&gt;&lt;/Branches&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/OnValid&gt;&lt;Properties xmlns:d7p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;Schemas xmlns:d7p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" /&gt;&lt;ValidationFlags&gt;ReportValidationWarnings&lt;/ValidationFlags&gt;&lt;d6p1:SchemaLocation i:nil="true" /&gt;&lt;d6p1:SchemaNames&gt;Guid;NeoPLMERPMaterialDefinition&lt;/d6p1:SchemaNames&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Children&gt;&lt;/Try&gt;&lt;/ESBMessagePipelineStep&gt;&lt;ESBMessagePipelineStep i:type="CancelPipelineStepOfESBMessagexAPWb1W4"&gt;&lt;Bindings xmlns:d4p1="http://schemas.datacontract.org/2004/07/Neuron.ComponentModel" /&gt;&lt;BreakPoint&gt;Disable&lt;/BreakPoint&gt;&lt;Disable&gt;false&lt;/Disable&gt;&lt;Id&gt;48bd5128-3de8-4786-9ae1-152b1904ec04&lt;/Id&gt;&lt;Name&gt;Cancel&lt;/Name&gt;&lt;Uniquename /&gt;&lt;/ESBMessagePipelineStep&gt;&lt;/Steps&gt;&lt;/ESBMessagePipeline&gt;</PipelineBlob>
  <IsProcessFlow>false</IsProcessFlow>
</ESBMessagePipelineStorage>